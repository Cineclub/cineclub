<h1><%= @team.name %></h1>
<p><small class="text-muted">Created <%= time_ago_in_words(@team.created_at) %> ago.</small></p>

<div class="card">
  <div class="card-header">Members</div>
  <% if @team.users.present? %>
    <ul class="list-group list-group-flush">
      <% @team.users.each do |user| %>
        <li class="list-group-item"><%= user.full_name %></li>
      <% end %>
    </ul>
  <% else %>
    <div class="card-body">
      <p>No members have joined this team yet.</p>
    </div>
  <% end %>
</div>

<% if signed_in? %>
  <p class="mt-3">
    <% if current_user.member_of?(@team) %>
      <%= link_to 'Leave', leave_team_path(@team), method: :patch, class: "btn btn-secondary" %>
    <% else %>
      <%= link_to 'Join', join_team_path(@team), method: :patch, class: "btn btn-primary" %>
    <% end %>
  </p>
<% end %>

<div class="mt-4">

  <h2>Game rounds</h2>
  <% if @team.rounds.present? %>
    <div class="row">
      <% @team.rounds.each do |round| %>
        <div class="col-md-3 mb-4">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title"><%= round.movie&.original_title %></h5>
              <h6 class="card-subtitle mb-2 text-muted"><%= round.movie&.directors_names %></h6>
              <p class="card-text"><%= round.user.full_name %></p>
            </div>
            <div class="card-footer">
              <%= link_to 'View', round_path(round), class: "card-link" %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p>No rounds have been created yet.</p>
  <% end %>

  <% if signed_in? && current_user.member_of?(@team) %>
  <p><%= link_to 'Create New Round', team_rounds_path(@team), method: :post, class: "btn btn-primary" %></p>
  <% end %>
</div>
